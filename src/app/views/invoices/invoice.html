<h1 translate>mnoe_admin_panel.dashboard.invoice.invoice_info</h1>
<a ui-sref="dashboard.invoices" class="text-muted">
  <i class="fa fa-chevron-left"></i><span translate>mnoe_admin_panel.dashboard.invoice.back</span>
</a>
<!-- invoice summary -->
<div id="single-invoice">
  <mno-widget is-loading="vm.isLoading" icon="fa-file-text-o" heading="{{'mnoe_admin_panel.dashboard.invoice.summary.widget.list.title' | translate}}">
    <mno-widget-header> 
    </mno-widget-header>
    <mno-widget-body class="large no-padding">
      <table class="table table-striped table-responsive">
        <thead>
          <tr>
            <th class="col-lg-1" translate>mnoe_admin_panel.dashboard.invoice.reference</th>
            <th class="col-lg-2" translate>mnoe_admin_panel.dashboard.invoice.customer</th>
            <th class="col-lg-3" translate>mnoe_admin_panel.dashboard.invoice.period</th>
            <th class="col-lg-2" translate>mnoe_admin_panel.dashboard.invoice.expected_payment_date</th>
            <th class="col-lg-1" translate>mnoe_admin_panel.dashboard.invoice.amount</th>
            <th class="col-lg-2" translate>mnoe_admin_panel.dashboard.invoice.status</th>
            <th class="col-lg-1" translate></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>{{vm.invoice.slug}}</td>
            <td>{{vm.organization.attributes.name}}</td>
            <td>{{vm.invoice.started_at | amCalendar}} - {{vm.invoice.ended_at | amCalendar}}</td>
            <td ng-if="vm.isPaymentEnabled">{{vm.calculatePaymentDate(vm.invoice.ended_at) | amCalendar }}</td>
            <td>{{vm.invoice.price.currency.symbol}}{{vm.invoice.price.fractional}}</td>
            <td>
              <span ng-show="vm.invoice.paid_at" translate>mnoe_admin_panel.dashboard.invoices.paid</span>
              <span ng-show="!vm.invoice.paid_at" translate>mnoe_admin_panel.dashboard.invoices.awaiting</span>
            </td>
            <td>
              <a ng-href="/mnoe/admin/invoices/{{vm.invoice.slug}}" target="_blank"><i class="fa fa-cloud-download"></i></a>
            </td>
          </tr>
        </tbody>
      </table>
    </mno-widget-body>
    <mno-widget-footer>
    </mno-widget-footer>
  </mno-widget>
</div>
<!-- Details -->
<mno-widget is-loading="vm.isLoading" heading="{{'mnoe_admin_panel.dashboard.invoice.details.widget.list.title' | translate}}">
  <mno-widget-header> 
  </mno-widget-header>
  <mno-widget-body class="large no-padding">
    <table class="table table-striped table-responsive">
      <thead>
        <tr>
          <th class="col-lg-2" translate>mnoe_admin_panel.dashboard.invoice.details.product</th>
          <th class="col-lg-2" translate>mnoe_admin_panel.dashboard.invoice.details.type</th>
          <th class="col-lg-3" translate>mnoe_admin_panel.dashboard.invoice.details.usage</th>
          <th class="col-lg-1" translate>mnoe_admin_panel.dashboard.invoice.details.price</th>
        </tr>
      </thead>
      <tbody ng-show="!vm.isLoading">
        <tr ng-repeat="bill in vm.billing_summary">
          <td>{{bill.name}}</td>
          <td>{{bill.label}}</td>
          <td>{{bill.usage}}</td>
          <td>{{bill.price_tag}}</td>
        </tr>
      </tbody>
    </table>
  </mno-widget-body>
  <mno-widget-footer>
  </mno-widget-footer>
</mno-widget>
